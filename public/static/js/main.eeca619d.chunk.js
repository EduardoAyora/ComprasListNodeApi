(this["webpackJsonpcompras-list"]=this["webpackJsonpcompras-list"]||[]).push([[0],{51:function(e,t,a){e.exports=a(73)},58:function(e,t,a){},59:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),s=a.n(o),c=(a(56),a(57),a(58),a(59),a(6)),l=a(7),i=a(10),u=a(9),d=a(8),p=a(23),h=a(41),m=a.n(h),f=a(84);function b(e){return r.a.createElement(f.a,{className:"mb-4",color:"light",light:!0,expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:e.align},e.children)))}var E=a(85),g=a(86),v=a(87),O=a(96),C=a(88),k=a(89),j=a(90),y=a(91),w=a(92),A=a(93),N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isModalOpen:!1},n.toggleModal=n.toggleModal.bind(Object(i.a)(n)),n.handleLogin=n.handleLogin.bind(Object(i.a)(n)),n.handleLogout=n.handleLogout.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"handleLogin",value:function(e){this.toggleModal(),this.props.loginUser({username:this.username.value,password:this.password.value}),e.preventDefault()}},{key:"handleLogout",value:function(){this.props.logoutUser()}},{key:"render",value:function(){var e=this;return r.a.createElement(b,{align:"mr-auto"},r.a.createElement(p.b,{to:"/carrito",className:"green"},r.a.createElement(m.a,{fontSize:"large"}),"Carrito"),r.a.createElement(E.a,{className:"ml-auto",navbar:!0},r.a.createElement(g.a,null,this.props.auth.isAuthenticated?r.a.createElement("div",null,r.a.createElement("div",{className:"navbar-text mr-3"},this.props.auth.user.username),r.a.createElement(v.a,{outline:!0,onClick:this.handleLogout},r.a.createElement("span",{className:"fa fa-sign-out fa-lg"})," Logout",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null)):r.a.createElement(v.a,{outline:!0,onClick:this.toggleModal},r.a.createElement("span",{className:"fa fa-sign-in fa-lg"})," Login",this.props.auth.isFetching?r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null))),r.a.createElement(O.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(C.a,{toggle:this.toggleModal},"Login"),r.a.createElement(k.a,null,r.a.createElement(j.a,{onSubmit:this.handleLogin},r.a.createElement(y.a,null,r.a.createElement(w.a,{htmlFor:"username"},"Username"),r.a.createElement(A.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(y.a,null,r.a.createElement(w.a,{htmlFor:"password"},"Password"),r.a.createElement(A.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})),r.a.createElement(y.a,{check:!0},r.a.createElement(w.a,{check:!0},r.a.createElement(A.a,{type:"checkbox",name:"remember",innerRef:function(t){return e.remember=t}}),"Remember me")),r.a.createElement(v.a,{type:"submit",value:"submit",color:"primary"},"Login")))))}}]),a}(r.a.Component),S=a(42),T=a.n(S),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(b,{align:"ml-auto"},r.a.createElement(p.b,{to:"/",className:"green"},"Todos mis art\xedculos",r.a.createElement(T.a,{fontSize:"large"})))}}]),a}(r.a.Component),U=a(43),L=a.n(U),D=a(94),M=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isModalOpen:!1},n.toggleModal=n.toggleModal.bind(Object(i.a)(n)),n.handleConfirm=n.handleConfirm.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"handleConfirm",value:function(e){this.toggleModal(),this.props.handleClick(),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{className:this.props.buttonClassName,onClick:this.toggleModal},this.props.buttonContent),r.a.createElement(O.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(C.a,{toggle:this.toggleModal},this.props.header),r.a.createElement(k.a,null,this.props.body),r.a.createElement(D.a,null,r.a.createElement(v.a,{color:"primary",onClick:this.handleConfirm},"Confirmar"),"\xa0",r.a.createElement(v.a,{color:"danger",onClick:this.toggleModal},"Cancelar"))))}}]),a}(r.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){this.props.postDeleteProduct(this.props.productId),this.props.deleteClick()}},{key:"render",value:function(){return r.a.createElement("div",{className:"float-right"},r.a.createElement(M,{header:"Eliminar producto",body:"\xbfEst\xe1 seguro que desea eliminar este producto?",buttonClassName:"btn btn-light",buttonContent:r.a.createElement(L.a,{fontSize:"small"}),handleClick:this.handleClick}))}}]),a}(r.a.Component),V=a(44),I=a.n(V),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){var e=this.props.product;this.props.postUpdateProduct(e.id,e.name,e.aisle,e.description,!0,e.marked),this.props.addClick()}},{key:"render",value:function(){return r.a.createElement("button",{className:"btn btn-light",onClick:this.handleClick},r.a.createElement(I.a,{fontSize:"small"}))}}]),a}(r.a.Component),G=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.product;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(R,{addClick:this.props.addClick,postUpdateProduct:this.props.postUpdateProduct,product:e}),"\xa0",r.a.createElement("button",{type:"button",className:"btn btn-link",style:{color:"green"}},e.name),r.a.createElement(x,{deleteClick:this.props.deleteClick,productId:e.id,postDeleteProduct:this.props.postDeleteProduct})))}}]),a}(r.a.Component),_=function(){return r.a.createElement("div",{className:"col-2"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",null,"Loading . . ."))},F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.searchText.toLowerCase(),a=[],n=this.props.products;return n.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),n.forEach((function(n){-1!==n.name.toLowerCase().indexOf(t)&&"1"!==n.inCart&&a.push(r.a.createElement(G,{product:n,key:n.id,addClick:e.props.addClick,deleteClick:e.props.deleteClick,postDeleteProduct:e.props.postDeleteProduct,postUpdateProduct:e.props.postUpdateProduct}))})),this.props.productsLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(_,null))):this.props.productsErrMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h4",null,this.props.productsErrMess))):null!=this.props.products?r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,a))):r.a.createElement("div",null)}}]),a}(r.a.Component),J=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(){var e=this.props.product;this.props.postUpdateProduct(e.id,e.name,e.aisle,e.description,e.inCart,"1"!==e.marked)}},{key:"render",value:function(){var e=this.props.product;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-check"},r.a.createElement(A.a,{type:"checkbox",defaultChecked:"1"===e.marked,onChange:this.handleChange}),"\xa0",r.a.createElement("label",{className:"form-check-label"},e.name)))),r.a.createElement("td",null,e.aisle))}}]),a}(r.a.Component),z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){var e=this;this.props.products.forEach((function(t){"1"===t.inCart&&"1"===t.marked&&e.props.postUpdateProduct(t.id,t.name,t.aisle,t.description,"0","0")})),this.props.goneClick()}},{key:"render",value:function(){return r.a.createElement("div",{className:"row mt-4 mb-4 justify-content-center"},r.a.createElement("div",{className:"col-5"},r.a.createElement("button",{className:"btn btn-outline-success btn-block",onClick:this.handleClick},"Quitar seleccionados")))}}]),a}(r.a.Component),Q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=[],a=this.props.products;return a.sort((function(e,t){return e.aisle>t.aisle?1:e.aisle<t.aisle?-1:0})),a.forEach((function(a){"1"===a.inCart&&t.push(r.a.createElement(J,{product:a,key:a.id,postUpdateProduct:e.props.postUpdateProduct}))})),this.props.productsLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(_,null))):this.props.productsErrMess?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("h4",null,this.props.productsErrMess))):null!=this.props.products?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input"}),"\xa0",r.a.createElement("label",{className:"form-check-label"},"Seleccionar Todo"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"Pasillo"))),r.a.createElement("tbody",null,t)))),r.a.createElement(z,{goneClick:this.props.goneClick,products:this.props.products,postUpdateProduct:this.props.postUpdateProduct})):r.a.createElement("div",null)}}]),a}(r.a.Component),B=a(45),q=a.n(B),Y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleClick",value:function(){var e=this;this.props.products.forEach((function(t){"0"===t.inCart&&e.props.postUpdateProduct(t.id,t.name,t.aisle,t.description,!0,!1)})),this.props.addAllClick()}},{key:"render",value:function(){return r.a.createElement(M,{header:"A\xf1adir todo",body:"\xbfEst\xe1 seguro que desea a\xf1adir todo al carrito?",buttonClassName:"btn btn-outline-success btn-block",buttonContent:r.a.createElement("span",null,r.a.createElement(q.a,null),"\xa0 Agregar todo al carrito"),handleClick:this.handleClick})}}]),a}(r.a.Component),W=a(46),$=a.n(W),H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isModalOpen:!1},n.toggleModal=n.toggleModal.bind(Object(i.a)(n)),n.handleAdd=n.handleAdd.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"handleAdd",value:function(e){this.toggleModal(),this.props.postProduct(this.username.value,this.aisle.value,this.description.value,!1,!1),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-outline-success btn-block",onClick:this.toggleModal},r.a.createElement($.a,null),"\xa0 Nuevo producto"),r.a.createElement(O.a,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(C.a,{toggle:this.toggleModal},"Nuevo Producto"),r.a.createElement(k.a,null,r.a.createElement(j.a,{onSubmit:function(t){e.handleAdd(t),e.props.createdClick()}},r.a.createElement(y.a,null,r.a.createElement(w.a,{htmlFor:"username"},"Nombre"),r.a.createElement(A.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})),r.a.createElement(y.a,null,r.a.createElement(w.a,{htmlFor:"aisle"},"Pasillo"),r.a.createElement(A.a,{type:"text",id:"aisle",name:"aisle",innerRef:function(t){return e.aisle=t}})),r.a.createElement(y.a,null,r.a.createElement(w.a,{htmlFor:"description"},"Description"),r.a.createElement(A.a,{type:"textarea",id:"description",name:"description",rows:"4",innerRef:function(t){return e.description=t}})),r.a.createElement(v.a,{type:"submit",value:"submit",color:"primary"},"A\xf1adir")))))}}]),a}(r.a.Component),K=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSearchTextChange=n.handleSearchTextChange.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleSearchTextChange",value:function(e){this.props.onSearchTextChange(e.target.value)}},{key:"render",value:function(){var e=this.props.searchText;return r.a.createElement("form",null,r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Buscar",value:e,onChange:this.handleSearchTextChange}))}}]),a}(r.a.Component),X=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-4 mb-4"},r.a.createElement("div",{className:"col"},r.a.createElement(K,{searchText:this.props.searchText,onSearchTextChange:this.props.onSearchTextChange}))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-12 col-md-6 mb-4"},r.a.createElement(Y,{addAllClick:this.props.addAllClick,products:this.props.products,postUpdateProduct:this.props.postUpdateProduct})),r.a.createElement("div",{className:"col-12 col-md-6 mb-4"},r.a.createElement(H,{createdClick:this.props.createdClick,postProduct:this.props.postProduct}))))}}]),a}(r.a.Component),Z=a(14),ee=a(95),te=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement(ee.a,{color:"success",isOpen:this.props.alertAddedVisible},"Se a\xf1adi\xf3 producto a carrito"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement(ee.a,{color:"danger",isOpen:this.props.alertDeletedVisible},"Se elimin\xf3 el producto"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement(ee.a,{color:"success",isOpen:this.props.alertAllAddedVisible},"Se a\xf1adieron todos los productos al carrito"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement(ee.a,{color:"success",isOpen:this.props.alertCreatedVisible},"Se ha creado el nuevo producto"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement(ee.a,{color:"success",isOpen:this.props.alertGoneVisible},"Se ha quitado el/los productos"))))}}]),a}(r.a.Component),ae=a(30),ne="http://localhost:3000/",re=function(){return{type:"PRODUCTS_LOADING"}},oe=function(e){return{type:"PRODUCTS_FAILED",payload:e}},se=function(e){return{type:"ADD_PRODUCTS",payload:e}},ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={searchText:"",alertAddedVisible:!1,alertDeletedVisible:!1,alertAllAddedVisible:!1,alertCreatedVisible:!1,alertGoneVisible:!1},n.handleSearchTextChange=n.handleSearchTextChange.bind(Object(i.a)(n)),n.showAddedAlert=n.showAddedAlert.bind(Object(i.a)(n)),n.showDeletedAlert=n.showDeletedAlert.bind(Object(i.a)(n)),n.showAllAddedAlert=n.showAllAddedAlert.bind(Object(i.a)(n)),n.showCreatedAlert=n.showCreatedAlert.bind(Object(i.a)(n)),n.showGoneAlert=n.showGoneAlert.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"handleSearchTextChange",value:function(e){this.setState({searchText:e})}},{key:"showAddedAlert",value:function(){var e=this;this.setState({alertAddedVisible:!0},(function(){window.setTimeout((function(){e.setState({alertAddedVisible:!1})}),2e3)}))}},{key:"showDeletedAlert",value:function(){var e=this;this.setState({alertDeletedVisible:!0},(function(){window.setTimeout((function(){e.setState({alertDeletedVisible:!1})}),2e3)}))}},{key:"showAllAddedAlert",value:function(){var e=this;this.setState({alertAllAddedVisible:!0},(function(){window.setTimeout((function(){e.setState({alertAllAddedVisible:!1})}),2e3)}))}},{key:"showCreatedAlert",value:function(){var e=this;this.setState({alertCreatedVisible:!0},(function(){window.setTimeout((function(){e.setState({alertCreatedVisible:!1})}),2e3)}))}},{key:"showGoneAlert",value:function(){var e=this;this.setState({alertGoneVisible:!0},(function(){window.setTimeout((function(){e.setState({alertGoneVisible:!1})}),2e3)}))}},{key:"render",value:function(){var e=this.props.products;return r.a.createElement("div",null,r.a.createElement(Z.c,null,r.a.createElement(Z.a,{exact:!0,path:"/"},r.a.createElement(N,{loginUser:this.props.loginUser,logoutUser:this.props.logoutUser,auth:this.props.auth}),r.a.createElement(X,{searchText:this.state.searchText,onSearchTextChange:this.handleSearchTextChange,addAllClick:this.showAllAddedAlert,createdClick:this.showCreatedAlert,postProduct:this.props.postProduct,products:e.products,postUpdateProduct:this.props.postUpdateProduct}),r.a.createElement(F,{products:e.products,searchText:this.state.searchText,addClick:this.showAddedAlert,deleteClick:this.showDeletedAlert,productsLoading:e.isLoading,productsErrMess:e.errMess,postDeleteProduct:this.props.postDeleteProduct,postUpdateProduct:this.props.postUpdateProduct})),r.a.createElement(Z.a,{path:"/carrito"},r.a.createElement(P,null),r.a.createElement(Q,{products:e.products,goneClick:this.showGoneAlert,productsLoading:e.isLoading,productsErrMess:e.errMess,postUpdateProduct:this.props.postUpdateProduct}))),r.a.createElement(te,{alertAddedVisible:this.state.alertAddedVisible,alertDeletedVisible:this.state.alertDeletedVisible,alertAllAddedVisible:this.state.alertAllAddedVisible,alertCreatedVisible:this.state.alertCreatedVisible,alertGoneVisible:this.state.alertGoneVisible}))}}]),a}(r.a.Component),le=Object(ae.b)((function(e){return{products:e.products,auth:e.auth}}),(function(e){return{postProduct:function(t,a,n,r,o){return e(function(e,t,a,n,r){return function(o){var s={name:e,aisle:t,description:a,inCart:n,marked:r};return fetch(ne+"create.php",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return o({type:"ADD_PRODUCT",payload:e})})).catch((function(e){console.log("post products",e.message),alert("Your comment could not be posted\nError: "+e.message)}))}}(t,a,n,r,o))},fetchProducts:function(){e((function(e){e(re(!0));var t="Bearer "+localStorage.getItem("token");return fetch(ne+"products",{method:"GET",headers:{"Content-Type":"application/json",Authorization:t},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(se(t))})).catch((function(t){return e(oe(t.message))}))}))},postDeleteProduct:function(t){return e(function(e){return function(t){var a={id:e};return fetch(ne+"delete.php",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return t({type:"DELETE_PRODUCT",payload:e})})).catch((function(e){console.log("post products",e.message),alert("Your comment could not be posted\nError: "+e.message)}))}}(t))},postUpdateProduct:function(t,a,n,r,o,s){return e(function(e,t,a,n,r,o){return function(s){var c={id:e,name:t,aisle:a,description:n,inCart:r,marked:o};return fetch(ne+"update.php",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return s({type:"UPDATE_PRODUCT",payload:e})})).catch((function(e){console.log("post products",e.message),alert("Your comment could not be posted\nError: "+e.message)}))}}(t,a,n,r,o,s))},loginUser:function(t){return e(function(e){return function(t){return t(function(e){return{type:"LOGIN_REQUEST",creds:e}}(e)),fetch(ne+"users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(a){if(!a.success){var n=new Error("Error "+a.status);throw n.response=a,n}localStorage.setItem("token",a.token),localStorage.setItem("creds",JSON.stringify(e)),t(function(e){return{type:"LOGIN_SUCCESS",token:e.token}}(a))})).catch((function(e){return t({type:"LOGIN_FAILURE",message:e.message})}))}}(t))},logoutUser:function(){return e((function(e){e({type:"LOGOUT_REQUEST"}),localStorage.removeItem("token"),localStorage.removeItem("creds"),e({type:"LOGOUT_SUCCESS"})}))}}}))(ce);var ie=function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(le,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=a(27),de=a(48),pe=a(49),he=a(12),me=Object(ue.d)(Object(ue.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCTS":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,errMess:null,products:t.payload});case"PRODUCTS_LOADING":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!0,errMess:null,products:[]});case"PRODUCTS_FAILED":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,errMess:t.payload});case"ADD_PRODUCT":var a=t.payload;return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,products:e.products.concat(a)});case"DELETE_PRODUCT":var n=t.payload;return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,products:e.products.filter((function(e){return e.id!==n.id}))});case"UPDATE_PRODUCT":var r=e.products.findIndex((function(e){return e.id===t.payload.id})),o=Object(pe.a)(e.products);return o[r]=t.payload,Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,products:o});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("creds")?JSON.parse(localStorage.getItem("creds")):null,errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!0,isAuthenticated:!1,user:t.creds});case"LOGIN_SUCCESS":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token});case"LOGIN_FAILURE":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,isAuthenticated:!1,errMess:t.message});case"LOGOUT_REQUEST":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!0,isAuthenticated:!0});case"LOGOUT_SUCCESS":return Object(he.a)(Object(he.a)({},e),{},{isLoading:!1,isAuthenticated:!1,token:"",user:null});default:return e}}}),Object(ue.a)(de.a));window.store=me,s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae.a,{store:me},r.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.eeca619d.chunk.js.map